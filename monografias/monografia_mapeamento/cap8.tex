%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%   Aplicação do ambiente virtual com um agente autônomo
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\chapter{Aplicação com ambiente virtual e agente autônomo}
\label{cap:aplicacao_autonomo}

A fim de produzir uma prova de conceito, foi implementada uma aplicação onde foi possível demonstrar a eficiência do algoritmo de mapeamento. Foi produzido um simulador com gravidade, colisão, rederização de texturas, objetos e atores (o agente nesse caso) e, tendo esse simulador como base, foi criada a aplicação que tem um agente utilizando-se do Toolkit Hórus para mapeamento e navegação dentro do ambiente simulado. Aguns conceitos foram tirados do \cite{Souza_2005}

\section{Simulador}

Um simulador é todo software (em nosso caso) que simula um comportamento de algum sistema. Deve ser capaz de reproduzir, de forma mais fiel possível, a realidade na qual ele tenta emular. No nosso caso foi desenvolvido um simulador de um ambiente, a fim de virtualizar um ambiente real.

O simulador desenvolvido foi tratado como uma aplicação a parte, pois não estava incluído no escopo do projeto, porém tendo em vista a necessidade de um simulador customizado para a realidade de um agente móvel (e na linguagem selecionada) o simulador foi incluido ao projeto. 

Alguns requisitos foram necessários para que o simulador fosse projetado. Alguns softwares que foram utilizados: \textit{Blender} e \textit{Panda3d}.
Como uma das linguagens utilizadas foi \textit{Python}, buscou-se ferramentas que fossem compatíveis (na verdade ambas são em \textit{Python}) com as linguagens utilizadas.

\subsection{Python}
Python é um linguagem orientada objetos de tipagem dinâmica, onde os tipos dos dados são atribuídos durante a interpretação do código dinamicamente e forte. O Python tem foco na produtividade com uma sitaxe legível e simples, bem como módulos auxiliares (grande maioria OpenSource) que garatem um excelente desempenho.


\subsection{Blender}
O Blender é um produto da Blender Fundation, que é open source e desenvolvido em Python para modelagem de objetos 3D que está disponível para vários sistemas operacionais sobre a licença GNU (\textit{General Public License}).
Por ser multiplataforma permite que as modelagens criadas possam ser executadas em outros sistemas operacionais que não o de origem.
O Blender foi usado para criar os modelos usados nas aplicações desenvolvidas como prova de conceito do \textit{Toolkit} Horus

Abaixo, uma imagem com a interface do Blender:

\begin{figure}[!htb]
\centering
\begin{center}
    \includegraphics[scale=0.2,bb=0 0 1280 750]{imagens/fotos/blender.png}
\end{center}
\caption{Tela inicial do Blender.}
\label{fig:blender}
\end{figure}




\subsection{Panda3D}

O \textit{Panda3D} é um produto da equipe de desenvolvimento da Walt Disney para renderização de jogos e ambientes virtuais em terceira dimensão. Estão sobre licença da \textit{BSD License} (com algumas modificações para adequação a realidade do projeto).
Foi desenvolvido em Python e é multiplataforma. Por isso, assim como o Blender, foi escolhido para uso em conjunto do \textit{Toolkit} Horus.
O uso do Panda3D no \textit{Toolkit} Horus restringe-se apenas à manipulação dos modelos previamente criados no Blender para então criar a aplicação que foi a prova de conceito.
Em outras palavras, o papel do Panda3D não está diretamente relacionado ao funcionamento do \textit{Toolkit},  ele é usado apenas para criar a aplicação que usa o \textit{Toolkit} Horus.


Abaixo, um exemplo desenvolvido com no Panda3D:

\begin{figure}[!htb]
\centering
\begin{center}
    \includegraphics[scale=0.4,bb=0 0 808 628]{imagens/fotos/battle_robots.png}
\end{center}
\caption{Um exemplo de aplicação utilizando Panda3D.}
\label{fig:panda3d_simple}
\end{figure}

\section{Ambiente}

O ambiente em que o agente foi testado consiste em uma área que simula um galpão com 5 cômodos onde o agente inicia sua movimentação no cômodo 1 e pode alcançar qualquer ponto do ambiente a partir de sua posição inicial. O ambiente que foi desenvolvido tem como objetivo emular, em menor escala, um ambiente real.

\begin{figure}[!htb]
\centering
\begin{center}
    \includegraphics[scale=0.3,bb=0 0 700 560]{imagens/fotos/robot.png}
\end{center}
\caption{O agente utilizado nos testes. Modelado em \textit{Blende3D}.}
\label{fig:agente}
\end{figure}

O agente utilizado foi inspirado no personagem de um filme que também é um agente inteligente, é possível notar a semelhança na figura \ref{fig:agente}.

\begin{figure}[htb]
\centering
\includegraphics[scale=0.3,bb=0 0 390 550]{imagens/fotos/galpao.png}
\caption{O ambiente utilizado para a prova de conceito. Modelada em Blende3D.}
\label{fig:ambiente_blender}
\end{figure}

A figura \ref{fig:ambiente_blender}, que demonstra o ambiente que foi utilizado, pode-se ter uma visão em perspectiva do ambiente modelado. Ele foi modelado em Blender, tal ferramenta proporcionou os recursos de modelagem UV, texturização, determinação de medidas precisas, entre outros. O Blender foi selecionado, também, por conta da sua legibilidade de fácil assimilação tendo em vista que o \textit{Toolkit} foi desenvolvido em \textit{Python} e a ferramenta utiliza a mesma linguagem para produzir os modelos.

\begin{figure}[htb]
\centering
\includegraphics[scale=0.3,bb=0 0 830 560]{imagens/fotos/colisions.png}
\caption{Os lasers projetados a partir do agente. Gerenciados pelo \textit{Panda3D}.}
\label{fig:ambiente_panda}
\end{figure}

O Panda3d foi utilizado para fazer todos os tratamentos de colisão e virtualização de camêras e renderização do agente no ambiente. Os lasers, áreas de colisão são tratados conforme a imagem \ref{fig:ambiente_panda} Como o Blender3D agilizou o processo o fato do \textit{Panda3D} ser em \textit{Python}.


